import{K as j,L as Z,h as T,C as G,M as U,N as K,O,P as z,Q as y,q as ee,R as x,S as k,T as B,U as re,V as ae,W as ne,X as fe,Y as se,Z as le,y as V,_ as ie,$ as ue,e as R,a0 as oe,a1 as te,c as ve,b as F,s as ce,a2 as q,a3 as de,a4 as pe,a5 as he,a6 as ge,a as Y,a7 as I,r as Q,p as W,a8 as D,a9 as _e,aa as Ee,d as me}from"./CrKLhVVU.js";import{B as Te}from"./BONLXmF1.js";const P=0,H=1;function be(e,f,s,c,p){T&&G();var v=j(),i=le,a=v?k(i):B(i,!1,!1),n=v?k(i):B(i,!1,!1),l=new Te(e);Z(()=>{var u=f(),o=!1;let g=T&&U(u)===(e.data===K);if(g&&(O(z()),y(!1)),U(u)){var A=re(),r=!1;const t=h=>{if(!o){r=!0,A(!1),ae.ensure(),T&&y(!1);try{h()}finally{ne(),fe||se()}}};u.then(h=>{t(()=>{x(a,h),l.ensure(H,c&&(m=>c(m,a)))})},h=>{t(()=>{if(x(n,h),l.ensure(H,p&&(m=>p(m,n))),!p)throw n.v})}),T?l.ensure(P,s):ee(()=>{r||t(()=>{l.ensure(P,s)})})}else x(a,u),l.ensure(H,c&&(t=>c(t,a)));return g&&y(!0),()=>{o=!0}})}function ye(e,f){return f}function Ne(e,f,s){for(var c=[],p=f.length,v,i=f.length,a=0;a<p;a++){let o=f[a];W(o,()=>{if(v){if(v.pending.delete(o),v.done.add(o),v.pending.size===0){var g=e.outrogroups;L(q(v.done)),g.delete(v),g.size===0&&(e.outrogroups=null)}}else i-=1},!1)}if(i===0){var n=c.length===0&&s!==null;if(n){var l=s,u=l.parentNode;Ee(u),u.append(l),e.items.clear()}L(f,!n)}else v={pending:new Set(f),done:new Set},(e.outrogroups??=new Set).add(v)}function L(e,f=!0){for(var s=0;s<e.length;s++)me(e[s],f)}var X;function Ce(e,f,s,c,p,v=null){var i=e,a=new Map;T&&G();var n=null,l=ie(()=>{var t=s();return de(t)?t:t==null?[]:q(t)}),u,o=!0;function g(){r.fallback=n,Ie(r,u,i,f,c),n!==null&&(u.length===0?(n.f&I)===0?Q(n):(n.f^=I,M(n,null,i)):W(n,()=>{n=null}))}var A=Z(()=>{u=V(l);var t=u.length;let h=!1;if(T){var m=ue(i)===K;m!==(t===0)&&(i=z(),O(i),y(!1),h=!0)}for(var _=new Set,w=ve,S=ce(),E=0;E<t;E+=1){T&&R.nodeType===oe&&R.data===te&&(i=R,h=!0,y(!1));var C=u[E],b=c(C,E),d=o?null:a.get(b);d?(d.v&&x(d.v,C),d.i&&x(d.i,E),S&&w.skipped_effects.delete(d.e)):(d=we(a,o?i:X??=Y(),C,b,E,p,f,s),o||(d.e.f|=I),a.set(b,d)),_.add(b)}if(t===0&&v&&!n&&(o?n=F(()=>v(i)):(n=F(()=>v(X??=Y())),n.f|=I)),T&&t>0&&O(z()),!o)if(S){for(const[$,J]of a)_.has($)||w.skipped_effects.add(J.e);w.oncommit(g),w.ondiscard(()=>{})}else g();h&&y(!0),V(l)}),r={effect:A,items:a,outrogroups:null,fallback:n};o=!1,T&&(i=R)}function Ie(e,f,s,c,p){var v=f.length,i=e.items,a=e.effect.first,n,l=null,u=[],o=[],g,A,r,t;for(t=0;t<v;t+=1){if(g=f[t],A=p(g,t),r=i.get(A).e,e.outrogroups!==null)for(const d of e.outrogroups)d.pending.delete(r),d.done.delete(r);if((r.f&I)!==0)if(r.f^=I,r===a)M(r,null,s);else{var h=l?l.next:a;r===e.effect.last&&(e.effect.last=r.prev),r.prev&&(r.prev.next=r.next),r.next&&(r.next.prev=r.prev),N(e,l,r),N(e,r,h),M(r,h,s),l=r,u=[],o=[],a=l.next;continue}if((r.f&D)!==0&&Q(r),r!==a){if(n!==void 0&&n.has(r)){if(u.length<o.length){var m=o[0],_;l=m.prev;var w=u[0],S=u[u.length-1];for(_=0;_<u.length;_+=1)M(u[_],m,s);for(_=0;_<o.length;_+=1)n.delete(o[_]);N(e,w.prev,S.next),N(e,l,w),N(e,S,m),a=m,l=S,t-=1,u=[],o=[]}else n.delete(r),M(r,a,s),N(e,r.prev,r.next),N(e,r,l===null?e.effect.first:l.next),N(e,l,r),l=r;continue}for(u=[],o=[];a!==null&&a!==r;)(n??=new Set).add(a),o.push(a),a=a.next;if(a===null)continue}(r.f&I)===0&&u.push(r),l=r,a=r.next}if(e.outrogroups!==null){for(const d of e.outrogroups)d.pending.size===0&&(L(q(d.done)),e.outrogroups?.delete(d));e.outrogroups.size===0&&(e.outrogroups=null)}if(a!==null||n!==void 0){var E=[];if(n!==void 0)for(r of n)(r.f&D)===0&&E.push(r);for(;a!==null;)(a.f&D)===0&&a!==e.fallback&&E.push(a),a=a.next;var C=E.length;if(C>0){var b=null;Ne(e,E,b)}}}function we(e,f,s,c,p,v,i,a){var n=(i&he)!==0?(i&ge)===0?B(s,!1,!1):k(s):null,l=(i&pe)!==0?k(p):null;return{v:n,i:l,e:F(()=>(v(f,n??s,l??p,a),()=>{e.delete(c)}))}}function M(e,f,s){if(e.nodes)for(var c=e.nodes.start,p=e.nodes.end,v=f&&(f.f&I)===0?f.nodes.start:s;c!==null;){var i=_e(c);if(v.before(c),c===p)return;c=i}}function N(e,f,s){f===null?e.effect.first=s:f.next=s,s===null?e.effect.last=f:s.prev=f}export{be as a,Ce as e,ye as i};
